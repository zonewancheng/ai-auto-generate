
const en = {
    // General
    documentTitle: "AI RPG Asset Factory",
    appTitle: "AI RPG Asset Factory",
    appSubtitle: "Generate characters, monsters, maps, and more with AI",
    error: "Error",
    loading: "Loading...",
    generating: "Generating...",
    processing: "Processing...",
    retry: "Retry",
    regenerate: "Regenerate",
    generate: "Generate",
    startOver: "Start Over",
    results: "Results",
    history: "History",
    delete: "Delete",
    confirmDeleteHistory: "Are you sure you want to delete this history record?",
    clickToZoom: "Click to zoom",
    previewAltText: "Preview",
    imagePreview: "Image Preview",
    closePreview: "Close Preview",
    downloadHint: "Right-click and 'Save Image As...' to download.",
    downloadPng: "Download PNG",
    removeBackground: "Remove Background",
    unknownError: "An unknown error occurred.",
    generationFailed: "Generation Failed",
    adjustmentFailed: "Adjustment Failed",
    bgRemovalFailed: "Background removal failed",
    imageProcessingError: "Failed to process uploaded image.",
    fileReadError: "Failed to read uploaded file.",
    partImageProcessingError: "Failed to process uploaded part image.",
    refImageProcessingError: "Failed to process reference image.",
    refFileReadError: "Failed to read reference file.",
    change: "Change",
    remove: "Remove",
    important: "Important",
    close: "Close",
    none: "None",
    yes: "Yes",
    no: "No",
    dbPrompt_adjusted: "Adjusted: {0} (Original: {1})",
    dbPrompt_bgRemoved: "Background Removed (Original: {0})",


    // Header
    languageSwitchTitle: "Switch Language",
    languageSwitchText: "中文",
    settings: "Settings",
    apiKeySettingsTitle: "Set API Key",
    settingsAriaLabel: "Settings",

    // API Key Modal
    apiKeySettings: "API Key Settings",
    apiKeyNotDetected: "No API key detected. You can use this application by configuring an environment variable or providing a key in the input box below.",
    apiKeyImportant: "<strong>Important:</strong> The image generation features of this application require an API key associated with a <strong>Google Cloud project with billing enabled</strong>. Using a free-tier key from AI Studio alone will not be sufficient to generate images.",
    apiKeyPlaceholder: "Paste your Gemini API key here",
    getApiKey: "Get your Gemini API key →",
    apiKeySecurity: "<strong>Security Notice:</strong> Your API key will be stored only in your browser's local storage.",
    apiKeyPrecedence: "The key set through this window will take precedence over any configured environment variables.",
    saveKey: "Save Key",
    
    // Tabs
    tab_character: "Character",
    tab_monster: "Monster",
    tab_pet: "Pet/Mount",
    tab_map: "Map/Tileset",
    tab_combat: "Combat FX",
    tab_chest: "Treasure Chest",
    tab_equipment: "Equipment Icon",
    tab_item: "Item Icon",
    tab_cg: "Game CG",
    tab_audio: "Game Audio",
    tab_skill: "Skill Design",
    tab_stats: "Stats Design",
    tab_game: "Game Plan",

    // Adjustment Input
    adjustImage: "Adjust Image",
    adjustImageDesc: "Not quite right? Describe how you want to modify the image.",
    adjustImagePlaceholder: "e.g., make it blue, add glowing effects, change to a horror style",
    adjusting: "Adjusting...",
    adjust: "Adjust",

    // History Panels
    historyEmpty_character: "Characters you generate will appear here.",
    historyEmpty_map: "Maps you generate will appear here.",
    historyEmpty_effect: "Effects you generate will appear here.",
    historyEmpty_chest: "Chests you generate will appear here.",
    historyEmpty_monster: "Monsters you generate will appear here.",
    historyEmpty_item: "Items you generate will appear here.",
    historyEmpty_equipment: "Equipment you generate will appear here.",
    historyEmpty_pet: "Pets you generate will appear here.",
    historyEmpty_cg: "Concept art you generate will appear here.",
    historyEmpty_audio: "Audio descriptions you generate will appear here.",
    historyEmpty_skill: "Skills you design will appear here.",
    historyEmpty_stats: "Stats you design will appear here.",
    historyEmpty_gameplan: "Game plans you generate will appear here.",

    // Character Generator
    mode_describe: "Describe",
    mode_optimize: "Optimize",
    mode_synthesis: "Synthesize",
    characterGenerationFailed: "Character generation failed",
    optimizationFailed_character: "Character optimization failed",
    synthesisFailed_character: "Character synthesis failed",
    character_step1_title: "Step 1: Describe Character",
    character_step1_desc: "Describe in detail. The AI will generate a base character design from your prompt.",
    character_step1_placeholder: "e.g., A cyborg ninja with a katana and glowing red eyes",
    tryExamples: "Or try these examples:",
    generateCharacter: "Generate Character",
    character_optimize_step1_title: "Step 1: Upload Character Image",
    character_optimize_step1_desc: "Upload your pixel art character, and the AI will optimize it while keeping the original dimensions.",
    uploadedCharacterPreview: "Uploaded character preview",
    changeImage: "Change Image",
    clickOrDropToUpload: "Click or drag & drop to upload",
    character_optimize_step2_title: "Step 2: Choose Optimization Options",
    character_optimize_step3_title: "Step 3: Specify Style Reference (Optional)",
    character_optimize_step3_placeholder: "e.g., Style closer to Octopath Traveler, add cyberpunk elements.",
    character_optimize_step4_title: "Step 4: Upload Reference Image (Optional)",
    character_optimize_step4_desc: "Upload an image as a style reference, and the AI will mimic its art style.",
    refImagePreview: "Reference image preview",
    optimizing: "Optimizing...",
    optimizeCharacter: "Optimize Character",
    character_synthesis_step1_title: "Step 1: Combine Parts",
    character_synthesis_step1_desc: "Upload images representing the head, pose, and clothes, and the AI will merge them into a new character.",
    part_head: "Head",
    part_pose: "Pose",
    part_clothes: "Clothes",
    character_synthesis_step2_title: "Step 2: Final Description",
    character_synthesis_step2_desc: "Describe what you want the final synthesized character to look like.",
    character_synthesis_step2_placeholder: "e.g., A valkyrie in ornate armor holding a spear.",
    synthesizing: "Synthesizing...",
    synthesizeCharacter: "Synthesize Character",
    loading_adjustingHero: "AI is adjusting your hero...",
    loading_optimizingHero: "AI is optimizing your hero...",
    loading_synthesizingHero: "AI is fusing your hero...",
    loading_creatingHero: "AI is creating your hero...",
    placeholder_baseCharacter: "Your base character will appear here.",
    generatedCharacterAlt: "Generated Character",
    character_step2_title: "Step 2: Generate Game Assets",
    character_step2_desc: "Use your base character to generate matching assets for RPG Maker MZ.",
    baseCharacter: "Base Character",
    character_nextStep: "Next Step: Generate Companion Assets",
    asset_walking: "Walking Sprite",
    asset_battler: "Battler",
    asset_faceset: "Faceset",
    derivedAssets: "Derived Assets",
    placeholder_derivedAssets: "Your generated assets (walking sprites, battlers, etc.) will appear here.",
    placeholderExamples_character: `[
        {"full": "A brave knight in shiny silver armor with a long red cape, holding a gleaming sword.", "short": "Brave Knight"},
        {"full": "A wise old wizard with a long white beard, a pointed hat, and a glowing staff.", "short": "Wise Wizard"},
        {"full": "A cheerful female bard in green clothes, carrying a lute on her back, with blonde hair.", "short": "Cheerful Bard"},
        {"full": "A stealthy rogue in dark leather armor with a hood, holding two daggers.", "short": "Stealthy Rogue"},
        {"full": "A futuristic cyborg warrior with glowing blue eyes and a plasma rifle.", "short": "Cyborg Warrior"}
    ]`,
    optimizationOptions_character: `{
        "sharpen": "Sharpen lines and details",
        "shading": "Enhance shadows and highlights",
        "colors": "Enrich and unify colors"
    }`,
    // FIX: Added missing translation keys
    optimizationBasePrompt_character: "Optimize the character with the following enhancements:\n",
    optimizationStylePrompt_character: "Additionally, apply this style influence: {0}\n",
    dbPrompt_optimized_character: "Optimized: {choices} | Style: {style} | Ref: {ref}",

    // App.tsx specific
    inspirationNeedAssetsError: "Inspiration needs material! Please generate at least one character, one monster, and one item first.",
    gameGenerationFailed: "Game Generation Failed",
    gameplanHero: "Hero",
    gameplanVillain: "Villain",
    gameplanKeyItem: "Key Item",
    gameplanConcept: "Based on the core assets provided by the user (hero, villain, key item), create a short, classic, complete fantasy adventure story suitable for RPG Maker. The story should revolve around the hero defeating the villain to reclaim the key item.",
    
    // Donation Modal
    donateDeveloper: "Donate to Developer",
    supportDeveloper: "Support the Developer",
    donationMessage: "If you find this tool helpful, consider buying me a coffee!",
    donationThanks: "Your support is the greatest motivation for continued updates and maintenance. Thank you so much!",
    donationPlaceholderNote: "The QR codes below are placeholders. Please replace them with your own payment QR code image links in the code.",
    wechatPay: "WeChat Pay",
    alipay: "Alipay",
    
    // Footer
    footerText: "Powered by Gemini API. Made for pixel art lovers.",
    donateAuthor: "Donate",
    githubSponsorTooltip: "Support the author long-term via GitHub",

    // Game Preview
    hero: "Hero",
    villain: "Villain",
    treasure: "Treasure",
    victoryMessage: "{0} defeated {1} and recovered the {2}!",
    startGame: "Start Game",
    challengeVillain: "Challenge {0}!",
    battleStart: "Battle Start!",
    attack: "Attack!",
    victory: "Victory!",
    endGame: "End Game",
    
    // Inspiration Modal
    inspirationGenerating: "Inspiration Striking...",
    keyItem: "Key Item",
    forTheKeyItem: "For the... Key Item",
    inspirationMessages: `[
        "Analyzing core assets...",
        "Building world and lore...",
        "Designing the hero's journey...",
        "Crafting the evil villain...",
        "Conceiving an epic quest...",
        "Inspiration is about to materialize!"
    ]`,
    
    // FIX: Merged service errors into the main translation object
    serviceErrors: {
        apiKeyNotSet: "Gemini API key is not set. Please enter it in the settings or configure it as an environment variable.",
        imagenBilledOnlyError: "Your API key does not have permission to access the image generation feature. This typically requires a Google Cloud project with billing enabled. Please check your API key settings.",
        rateLimitError: "Request limit reached. Please try again later.",
        geminiApiError: "Gemini API Error: {0}",
        unknownGenerationError: "An unknown error occurred while generating the image.",
        noImageDataError: "The API did not return any image data. This may be due to safety policies or an ambiguous prompt. Please try modifying your prompt.",
        invalidBase64Data: "Invalid base64 image data provided.",
        safetyRejection: "Request rejected for safety reasons. {0}",
        safetyRatingDetail: "Category {0} was flagged as {1}",
        apiRefusalError: "The API did not return a valid image; the request may have been rejected. Please try modifying your prompt or image.",
        invalidMainImageData: "Invalid main image data provided.",
        atLeastOneRefImage: "At least one reference image must be provided.",
        noValidAssetImages: "No valid asset images were provided.",
        dbOpenError: "Error opening database",
        dbAddAssetError: "Error adding asset",
        dbGetAssetsError: "Error getting assets",
        dbGetAllAssetsError: "Error getting all assets",
        dbDeleteAssetError: "Error deleting asset",
    }
};

const zh: typeof en = {
    // General
    documentTitle: "AI RPG 资源工厂",
    appTitle: "AI RPG 资源工厂",
    appSubtitle: "使用 AI 生成角色、怪物、地图等游戏资源",
    error: "错误",
    loading: "加载中...",
    generating: "生成中...",
    processing: "处理中...",
    retry: "重试",
    regenerate: "重新生成",
    generate: "生成",
    startOver: "重新开始",
    results: "结果",
    history: "历史记录",
    delete: "删除",
    confirmDeleteHistory: "你确定要删除这条历史记录吗？",
    clickToZoom: "点击放大预览",
    previewAltText: "预览",
    imagePreview: "图像预览",
    closePreview: "关闭预览",
    downloadHint: "右键点击并“图像另存为...”来下载。",
    downloadPng: "下载 PNG",
    removeBackground: "一键去背",
    unknownError: "发生未知错误。",
    generationFailed: "生成失败",
    adjustmentFailed: "调整失败",
    bgRemovalFailed: "去背失败",
    imageProcessingError: "处理上传图片失败。",
    fileReadError: "读取上传文件失败。",
    partImageProcessingError: "处理上传素材失败。",
    refImageProcessingError: "处理参考文件失败。",
    refFileReadError: "读取参考文件失败。",
    change: "更换",
    remove: "移除",
    important: "重要提示",
    close: "关闭",
    none: "无",
    yes: "有",
    no: "无",
    dbPrompt_adjusted: "已调整: {0} (原始: {1})",
    dbPrompt_bgRemoved: "已移除背景 (原始: {0})",


    // Header
    languageSwitchTitle: "切换语言",
    languageSwitchText: "EN",
    settings: "设置",
    apiKeySettingsTitle: "设置 API 密钥",
    settingsAriaLabel: "设置",

    // API Key Modal
    apiKeySettings: "设置 API 密钥",
    apiKeyNotDetected: "未检测到 API 密钥。您可以通过配置环境变量或在下方输入框中提供密钥来使用此应用。",
    apiKeyImportant: "<strong>重要提示：</strong>本应用的图像生成功能需要使用与<strong>已启用结算功能的 Google Cloud 项目</strong>关联的 API 密钥。仅使用 AI Studio 的免费密钥将无法生成图像。",
    apiKeyPlaceholder: "在此处粘贴您的 Gemini API 密钥",
    getApiKey: "获取 Gemini API 密钥 →",
    apiKeySecurity: "<strong>安全提示：</strong>您的 API 密钥将仅存储在您的浏览器本地。",
    apiKeyPrecedence: "通过此窗口设置的密钥将优先于任何已配置的环境变量。",
    saveKey: "保存密钥",
    
    // Tabs
    tab_character: "角色生成",
    tab_monster: "怪物生成",
    tab_pet: "宠物/坐骑",
    tab_map: "地图/图块",
    tab_combat: "战斗特效",
    tab_chest: "宝箱",
    tab_equipment: "装备图标",
    tab_item: "物品图标",
    tab_cg: "游戏原画",
    tab_audio: "游戏音频",
    tab_skill: "角色技能",
    tab_stats: "数值设计",
    tab_game: "游戏策划",

    // Adjustment Input
    adjustImage: "调整图像",
    adjustImageDesc: "不太对？描述一下你想如何修改图像。",
    adjustImagePlaceholder: "例如：把它变成蓝色，增加发光效果，改成恐怖风格",
    adjusting: "调整中...",
    adjust: "调整",

    // History Panels
    historyEmpty_character: "你生成的角色将显示在此处。",
    historyEmpty_map: "你生成的地图将显示在此处。",
    historyEmpty_effect: "你生成的特效将显示在此处。",
    historyEmpty_chest: "你生成的宝箱将显示在此处。",
    historyEmpty_monster: "你生成的怪物将显示在此处。",
    historyEmpty_item: "你生成的物品将显示在此处。",
    historyEmpty_equipment: "你生成的装备将显示在此处。",
    historyEmpty_pet: "你生成的宠物将显示在此处。",
    historyEmpty_cg: "你生成的原画将显示在此处。",
    historyEmpty_audio: "你生成的音频描述将显示在此处。",
    historyEmpty_skill: "你设计的技能将显示在此处。",
    historyEmpty_stats: "你设计的数值将显示在此处。",
    historyEmpty_gameplan: "你生成的游戏策划案将显示在此处。",

    // Character Generator
    mode_describe: "描述生成",
    mode_optimize: "优化图片",
    mode_synthesis: "素材合成",
    characterGenerationFailed: "生成角色失败",
    optimizationFailed_character: "优化角色失败",
    synthesisFailed_character: "合成角色失败",
    character_step1_title: "第一步：描述角色",
    character_step1_desc: "请详细描述。AI 将根据你的提示生成基础角色设计。",
    character_step1_placeholder: "例如：一个持武士刀、眼睛发红光的赛博格忍者",
    tryExamples: "或试试这些示例：",
    generateCharacter: "生成角色",
    character_optimize_step1_title: "第一步：上传角色图片",
    character_optimize_step1_desc: "上传你的像素图角色，AI 将会优化它，同时保持原图尺寸。",
    uploadedCharacterPreview: "上传角色预览",
    changeImage: "更换图片",
    clickOrDropToUpload: "点击或拖放上传",
    character_optimize_step2_title: "第二步：选择优化选项",
    character_optimize_step3_title: "第三步：指定参考风格 (可选)",
    character_optimize_step3_placeholder: "例如：风格更接近《八方旅人》，增加赛博朋克元素。",
    character_optimize_step4_title: "第四步：上传参考图片 (可选)",
    character_optimize_step4_desc: "上传一张图片作为风格参考，AI 将模仿其画风。",
    refImagePreview: "参考图片预览",
    optimizing: "优化中...",
    optimizeCharacter: "优化角色",
    character_synthesis_step1_title: "第一步：组合素材",
    character_synthesis_step1_desc: "分别上传代表头像、动作和衣服的图片，AI 将会把它们融合成一个新角色。",
    part_head: "头像 (Head)",
    part_pose: "动作 (Pose)",
    part_clothes: "衣服 (Clothes)",
    character_synthesis_step2_title: "第二步：最终描述",
    character_synthesis_step2_desc: "描述你希望最终合成的角色是什么样的。",
    character_synthesis_step2_placeholder: "例如：一位穿着华丽铠甲、手持长矛的女武神。",
    synthesizing: "合成中...",
    synthesizeCharacter: "合成角色",
    loading_adjustingHero: "AI 正在调整你的英雄...",
    loading_optimizingHero: "AI 正在优化你的英雄...",
    loading_synthesizingHero: "AI 正在融合你的英雄...",
    loading_creatingHero: "AI 正在塑造你的英雄...",
    placeholder_baseCharacter: "你的基础角色将显示在此处。",
    generatedCharacterAlt: "生成的角色",
    character_step2_title: "第二步：生成游戏资源",
    character_step2_desc: "使用你的基础角色为 RPG Maker MZ 生成配套资源。",
    baseCharacter: "基础角色",
    character_nextStep: "下一步：生成配套资源",
    asset_walking: "行走图",
    asset_battler: "战斗图",
    asset_faceset: "脸图",
    derivedAssets: "配套资源",
    placeholder_derivedAssets: "你生成的资源 (行走图、战斗图等) 将会显示在这里。",
    placeholderExamples_character: `[
        {"full": "一位勇敢的骑士，身穿闪亮的银色盔甲，披着红色长披风，手持一把闪闪发光的剑。", "short": "勇敢的骑士"},
        {"full": "一位智慧的老法师，留着长长的白胡子，戴着一顶尖顶帽，手持一根发光的手杖。", "short": "智慧的法师"},
        {"full": "一位开朗的女吟游诗人，身穿绿色衣服，背着一把鲁特琴，留着一头金发。", "short": "开朗的诗人"},
        {"full": "一位潜行的盗贼，身穿深色皮甲，戴着兜帽，手持两把匕首。", "short": "潜行的盗贼"},
        {"full": "一位未来的半机械人战士，拥有发光的蓝色眼睛和一把等离子步枪。", "short": "半机械战士"}
    ]`,
    optimizationOptions_character: `{
        "sharpen": "锐化线条和细节",
        "shading": "增强阴影和高光",
        "colors": "丰富并统一色彩"
    }`,
    // FIX: Added missing translation keys
    optimizationBasePrompt_character: "根据以下选项优化角色：\n",
    optimizationStylePrompt_character: "另外，应用此风格影响：{0}\n",
    dbPrompt_optimized_character: "已优化: {choices} | 风格: {style} | 参考图: {ref}",
    
    // App.tsx specific
    inspirationNeedAssetsError: "灵感需要素材！请先生成至少一个角色、一个怪物和一个物品。",
    gameGenerationFailed: "生成游戏失败",
    gameplanHero: "主角",
    gameplanVillain: "反派",
    gameplanKeyItem: "关键物品",
    gameplanConcept: "根据用户提供的核心资源（主角、反派、关键物品），创建一个简短、经典、完整、适合 RPG Maker 的幻想冒险故事。故事应该围绕英雄击败反派、夺回关键物品展开。",

    // Donation Modal
    donateDeveloper: "打赏开发者",
    supportDeveloper: "支持开发者",
    donationMessage: "如果你觉得这个工具对你有帮助，可以请我喝杯咖啡！",
    donationThanks: "你的支持是我持续更新和维护的最大动力。非常感谢！",
    donationPlaceholderNote: "下面的二维码是占位符。请在代码中将它们替换为您自己的收款码图片链接。",
    wechatPay: "微信支付",
    alipay: "支付宝",
    
    // Footer
    footerText: "由 Gemini API 驱动。为像素艺术爱好者打造。",
    donateAuthor: "打赏作者",
    githubSponsorTooltip: "通过 GitHub 长期支持作者",

    // Game Preview
    hero: "英雄",
    villain: "反派",
    treasure: "宝物",
    victoryMessage: "{0} 击败了 {1} 并夺回了 {2}!",
    startGame: "开始游戏",
    challengeVillain: "挑战 {0}!",
    battleStart: "战斗开始!",
    attack: "攻击!",
    victory: "胜利!",
    endGame: "结束游戏",
    
    // Inspiration Modal
    inspirationGenerating: "灵光迸发中...",
    keyItem: "关键物品",
    forTheKeyItem: "为了... 关键物品",
    inspirationMessages: `[
        "正在分析核心素材...",
        "构建世界观与传说...",
        "设计英雄的旅程...",
        "塑造邪恶的反派...",
        "构思史诗般的任务...",
        "灵感即将具象化！"
    ]`,
    // FIX: Merged service errors into the main translation object
    serviceErrors: {
        apiKeyNotSet: "Gemini API 密钥未设置。请在设置中输入，或配置环境变量。",
        imagenBilledOnlyError: "您的 API 密钥无权访问图像生成功能。这通常需要一个启用了结算功能的 Google Cloud 项目。请检查您的 API 密钥设置。",
        rateLimitError: "已达到请求上限。请稍后再试。",
        geminiApiError: "Gemini API 错误: {0}",
        unknownGenerationError: "生成图像时发生未知错误。",
        noImageDataError: "API 未返回任何图像数据。这可能是由于安全策略或提示过于模糊。请尝试修改您的提示。",
        invalidBase64Data: "提供了无效的 base64 图像数据。",
        safetyRejection: "请求因安全原因被拒绝。{0}",
        safetyRatingDetail: "类别 {0} 被标记为 {1}",
        apiRefusalError: "API 未返回有效图片，请求可能已被拒绝。请尝试修改你的提示或图片。",
        invalidMainImageData: "提供了无效的主图像数据。",
        atLeastOneRefImage: "至少需要提供一张参考图片。",
        noValidAssetImages: "没有提供有效的资源图片。",
        dbOpenError: "打开数据库时出错",
        dbAddAssetError: "添加资源时出错",
        dbGetAssetsError: "获取资源时出错",
        dbGetAllAssetsError: "获取所有资源时出错",
        dbDeleteAssetError: "删除资源时出错",
    }
};


export const translations = { en, zh };

// A simplified type for TranslationKeys to avoid syntax errors in browsers
// that don't support advanced TypeScript features like mapped/conditional types.
export type TranslationKeys = string;
